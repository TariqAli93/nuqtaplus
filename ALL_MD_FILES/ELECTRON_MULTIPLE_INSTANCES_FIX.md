# ุฏููู ุญู ูุดููุฉ ุงููุณุฎ ุงููุชุนุฏุฏุฉ ูุชุทุจูู CodeLIMS

## ๐ ุงูุชุญุณููุงุช ุงููุทุจูุฉ

### 1. Single Instance Lock

ุชู ุฅุถุงูุฉ ุขููุฉ ูููุน ุชุดุบูู ุฃูุซุฑ ูู ูุณุฎุฉ ูุงุญุฏุฉ ูู ุงูุชุทุจูู:

```javascript
const gotTheLock = app.requestSingleInstanceLock();

if (!gotTheLock) {
  logger.info('Another instance is already running. Exiting...');
  app.quit();
} else {
  app.on('second-instance', (_event, _commandLine, _workingDirectory) => {
    // ุงูุชุฑููุฒ ุนูู ุงููุงูุฐุฉ ุงูููุฌูุฏุฉ ุจุฏูุงู ูู ูุชุญ ูุงูุฐุฉ ุฌุฏูุฏุฉ
    if (mainWindow) {
      if (mainWindow.isMinimized()) mainWindow.restore();
      mainWindow.focus();
    }
  });
}
```

### 2. ุฅุฏุงุฑุฉ ูุญุณูุฉ ููููุงูุฐ

- ูุญุต ูุฌูุฏ ูุงูุฐุฉ ูุจู ุฅูุดุงุก ูุงูุฐุฉ ุฌุฏูุฏุฉ
- ููุน ุฅูุดุงุก ููุงูุฐ ูุชุนุฏุฏุฉ ุบูุฑ ูุฑุบูุจ ูููุง

### 3. ุชูุธูู ุงูุนูููุงุช ุงููุฑุนูุฉ

ุชู ุฅุถุงูุฉ ูุธููุฉ `cleanupBackendProcess()` ููุชุฃูุฏ ูู ุฅููุงุก ุนูููุฉ ุงูุฎุงุฏู ุจุดูู ุตุญูุญ:

```javascript
function cleanupBackendProcess() {
  if (backendProcess && !backendProcess.killed) {
    logger.info('Cleaning up backend process...');
    try {
      backendProcess.kill('SIGTERM');

      setTimeout(() => {
        if (backendProcess && !backendProcess.killed) {
          logger.warn('Backend process did not terminate gracefully, force killing...');
          backendProcess.kill('SIGKILL');
        }
      }, 5000);
    } catch (error) {
      logger.error('Error cleaning up backend process:', error);
    }
    backendProcess = null;
  }
}
```

### 4. ูุนุงูุฌุฉ ูุญุณูุฉ ูุฃุญุฏุงุซ ุงูุฅุบูุงู

- `window-all-closed`: ุชูุธูู ุงูุนูููุงุช ุนูุฏ ุฅุบูุงู ุงูููุงูุฐ
- `before-quit`: ุงูุชุธุงุฑ ุชูุธูู ุงูุนูููุงุช ูุจู ุงูุฅุบูุงู
- `will-quit`: ุชูุธูู ุฅุถุงูู ููุชุฃูุฏ

### 5. ุฅุนุฏุงุฏุงุช ุขููุฉ ููุชุทููุฑ

ุชู ุฅุถุงูุฉ ุณูุฑูุจุชุงุช ุฌุฏูุฏุฉ:

```json
{
  "dev:safe": "node monitor-processes.js --kill && pnpm dev",
  "monitor": "node monitor-processes.js --check",
  "kill-processes": "node monitor-processes.js --kill",
  "clean-start": "pnpm kill-processes && pnpm dev"
}
```

## ๐๏ธ ุฃุฏูุงุช ุงููุฑุงูุจุฉ ูุงูุชุดุฎูุต

### 1. ูุฑุงูุจ ุงูุนูููุงุช (`monitor-processes.js`)

```bash
# ูุญุต ุงูุนูููุงุช ุงูุญุงููุฉ
node monitor-processes.js --check

# ุฅููุงุก ุฌููุน ุนูููุงุช Electron
node monitor-processes.js --kill

# ุนุฑุถ ุงููุณุงุนุฏุฉ
node monitor-processes.js --help
```

### 2. ุณูุฑูุจุชุงุช ุงูุชุดุบูู ุงูุขููุฉ

```bash
# ุชุดุบูู ุขูู ูุน ุชูุธูู ุงูุนูููุงุช ุงูุณุงุจูุฉ
pnpm dev:safe

# ุฃู
pnpm clean-start

# ูุฑุงูุจุฉ ุงูุนูููุงุช
pnpm monitor
```

## ๐ง ุฎุทูุงุช ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### 1. ูุญุต ุงูุนูููุงุช ุงูุญุงููุฉ

```bash
pnpm monitor
```

### 2. ุชูุธูู ุงูุนูููุงุช ุงููุนููุฉ

```bash
pnpm kill-processes
```

### 3. ุชุดุบูู ุขูู

```bash
pnpm dev:safe
```

### 4. ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ

1. ุฃุนุฏ ุชุดุบูู ูุธุงู ุงูุชุดุบูู
2. ุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุนูููุงุช ูุนููุฉ ูู ูุฏูุฑ ุงูููุงู
3. ุงุณุชุฎุฏู `clean-start` ุจุฏูุงู ูู `dev`

## ๐ ุนูุงูุงุช ุงููุฌุงุญ

### โ ุงููุชุงุฆุฌ ุงููุชููุนุฉ:

- ุชุดุบูู ูุณุฎุฉ ูุงุญุฏุฉ ููุท ูู ุงูุชุทุจูู
- ุงูุชุฑููุฒ ุนูู ุงููุงูุฐุฉ ุงูููุฌูุฏุฉ ุนูุฏ ูุญุงููุฉ ุชุดุบูู ูุณุฎุฉ ุซุงููุฉ
- ุฅููุงุก ูุธูู ููุนูููุงุช ุงููุฑุนูุฉ ุนูุฏ ุงูุฅุบูุงู
- ุนุฏู ูุฌูุฏ ุนูููุงุช ูุนููุฉ ูู ุงูุฎูููุฉ

### โ๏ธ ุนูุงูุงุช ุงููุดุงูู:

- ุนุฏุฉ ุนูููุงุช `electron.exe` ูู ูุฏูุฑ ุงูููุงู
- ููุงูุฐ ูุชุนุฏุฏุฉ ููุชูุญุฉ
- ุนูููุงุช `node.exe` ูุนููุฉ ุจุนุฏ ุงูุฅุบูุงู

## ๐ ุฃูุถู ุงูููุงุฑุณุงุช

1. **ุงุณุชุฎุฏู ุงูุณูุฑูุจุชุงุช ุงูุขููุฉ ุฏุงุฆูุงู**

   ```bash
   pnpm dev:safe
   ```

2. **ุฑุงูุจ ุงูุนูููุงุช ุฏูุฑูุงู**

   ```bash
   pnpm monitor
   ```

3. **ูุธู ุงูุนูููุงุช ูุจู ุฅุนุงุฏุฉ ุงูุชุดุบูู**

   ```bash
   pnpm kill-processes
   ```

4. **ุชุญูู ูู ุงูุณุฌูุงุช**
   - ูุญุต ูููุงุช ุงูุณุฌู ูู `userData/logs/`
   - ูุฑุงูุจุฉ ุฑุณุงุฆู ูุญุฏุฉ ุงูุชุญูู

## ๐ ููุงุญุธุงุช ุฅุถุงููุฉ

- ุฌููุน ุงูุชุบููุฑุงุช ูุชูุงููุฉ ูุน Windows/Mac/Linux
- ุชู ุฅุถุงูุฉ ุชุณุฌูู ููุตู ูุชุชุจุน ุงูุนูููุงุช
- ุงููุธุงู ูุฏุนู ุงูุชุนุงูู ุงูุชููุงุฆู ูู ุงูุฃุฎุทุงุก
- ุชู ุชุญุณูู ุงุณุชููุงู ุงูููุงุฑุฏ
